
server { 
	listen       80;
	server_name  {{BOATYARD_APP}}.boatyardapp.com;

	# main access log
	access_log  /var/log/boatyard/{{BOATYARD_APP}}.access main;
	error_log  /var/log/boatyard/{{BOATYARD_APP}}.error info;
	
	root /home/{{BOATYARD_USER}}/deployed-apps/{{BOATYARD_APP}}/webs;
    
	location /media {
		root /home/{{BOATYARD_USER}}/deployed-apps/{{BOATYARD_APP}}/webs/media;
	}
	
	location ~* ^.+\.(mpg|avi|mp3|swf|zip|tgz|gz|rar|bz2|doc|xls|exe|ppt|txt|tar|mid|midi|wav|rtf|mpeg)$ {
		access_log off;
		break;
	}

	location ~* ^.+\.(jpg|jpeg|gif|png|ico|css|bmp|js)$ {
		access_log off;
		expires 30d;
		break;
	}

	location  / {
		#client_body_buffer_size 50;
		uwsgi_pass unix:///tmp/boatyard-{{BOATYARD_APP}}.sock;
		include /etc/uwsgi/uwsgi_params;
	}
	
	
}

